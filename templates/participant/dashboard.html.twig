{% extends 'base.html.twig' %}

{% block title %}
	Dashboard - Tableau de Bord
{% endblock %}

{% block body %}
	<style>
		/* =================================
		   CSS VARIABLES & ROOT SETTINGS
		   ================================= */
		:root {
			--primary-red: #ff3e5f;
			--primary-green: #2ecc71;
			--primary-blue: #667eea;
			--primary-purple: #764ba2;
			--primary-white: #ffffff;
			--dark-bg: #0f1621;
			--glass-bg: rgba(255, 255, 255, 0.05);
			--text-light: #f0f0f0;
			--text-dim: #b0b0b0;
			--shadow-neon-red: 0 0 10px rgba(255, 62, 95, 0.3);
			--shadow-neon-green: 0 0 10px rgba(46, 204, 113, 0.3);
			--shadow-neon-blue: 0 0 10px rgba(102, 126, 234, 0.3);
			--shadow-color: rgba(0, 0, 0, 0.3);
			--card-background: rgba(255, 255, 255, 0.1);
			--transition: all 0.3s ease;
		}

		:root[data-theme="light"] {
			--primary-red: #e74c3c;
			--primary-green: #27ae60;
			--primary-blue: #2980b9;
			--primary-purple: #8e44ad;
			--primary-white: #2c3e50;
			--dark-bg: #f8f9fa;
			--glass-bg: rgba(255, 255, 255, 0.95);
			--text-light: #2c3e50;
			--text-dim: #7f8c8d;
			--shadow-neon-red: 0 0 10px rgba(231, 76, 60, 0.2);
			--shadow-neon-green: 0 0 10px rgba(39, 174, 96, 0.2);
			--shadow-neon-blue: 0 0 10px rgba(41, 128, 185, 0.2);
			--shadow-color: rgba(0, 0, 0, 0.1);
			--card-background: rgba(255, 255, 255, 0.95);
		}

		/* =================================
		   GLOBAL STYLES
		   ================================= */
		* {
			margin: 0;
			padding: 0;
			box-sizing: border-box;
		}

		body {
			background: var(--dark-bg);
			color: var(--text-light);
			min-height: 100vh;
			font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
			transition: var(--transition);
		}

		/* =================================
		   ANIMATIONS & KEYFRAMES
		   ================================= */
		@keyframes pulse {
			0% {
				transform: scale(0.8);
				opacity: 0.5;
			}
			100% {
				transform: scale(1.2);
				opacity: 0.8;
			}
		}

		@keyframes fadeIn {
			from {
				opacity: 0;
				transform: translateY(-5px);
			}
			to {
				opacity: 1;
				transform: translateY(0);
			}
		}

		@keyframes slideInDown {
			from {
				transform: translateY(-100px);
				opacity: 0;
			}
			to {
				transform: translateY(0);
				opacity: 1;
			}
		}

		@keyframes slideInRight {
			from {
				transform: translateX(100px);
				opacity: 0;
			}
			to {
				transform: translateX(0);
				opacity: 1;
			}
		}

		@keyframes fadeInUp {
			from {
				transform: translateY(50px);
				opacity: 0;
			}
			to {
				transform: translateY(0);
				opacity: 1;
			}
		}

		/* =================================
		   THEME TOGGLE COMPONENT
		   ================================= */
		.theme-toggle {
			position: fixed;
			top: 20px;
			right: 20px;
			z-index: 999;
			background: var(--card-background);
			border: 2px solid var(--text-light);
			border-radius: 50px;
			padding: 8px;
			cursor: pointer;
			box-shadow: 0 4px 15px var(--shadow-color);
			transition: var(--transition);
			display: flex;
			align-items: center;
			gap: 6px;
			width: 40px;
			height: 40px;
		}

		.theme-toggle:hover {
			transform: scale(1.05);
			box-shadow: 0 6px 20px var(--shadow-color);
		}

		.theme-toggle .sun-icon,
		.theme-toggle .moon-icon {
			display: flex;
			align-items: center;
			justify-content: center;
		}

		.theme-toggle svg {
			width: 20px;
			height: 20px;
			display: block;
			color: currentColor;
			transition: var(--transition);
		}

		.theme-toggle .sun-icon svg {
			color: #ffa500;
		}

		.theme-toggle .moon-icon svg {
			color: #4cc9f0;
		}

		/* =================================
		   SIDEBAR TOGGLE BUTTON
		   ================================= */
		.sidebar-toggle {
			position: fixed;
			top: 20px;
			left: 20px;
			z-index: 1000;
			background: var(--card-background);
			border: 2px solid var(--text-light);
			border-radius: 50px;
			padding: 8px;
			cursor: pointer;
			box-shadow: 0 4px 15px var(--shadow-color);
			transition: var(--transition);
			display: flex;
			align-items: center;
			justify-content: center;
			width: 40px;
			height: 40px;
		}

		.sidebar-toggle:hover {
			transform: scale(1.05);
			box-shadow: 0 6px 20px var(--shadow-color);
		}

		.sidebar-toggle svg {
			width: 20px;
			height: 20px;
			color: var(--text-light);
			transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
		}

		/* =================================
		   DASHBOARD LAYOUT
		   ================================= */
		.dashboard-container {
			display: flex;
			min-height: 100vh;
			position: relative;
		}

		/* Sidebar - Enhanced with desktop collapse and mobile behavior */
		.sidebar {
			width: 80px; /* Default collapsed width on desktop */
			background: rgba(15, 22, 33, 0.9);
			backdrop-filter: blur(10px);
			padding: 20px 15px; /* Reduced top padding slightly */
			border-right: 1px solid rgba(255, 255, 255, 0.1);
			transition: all 0.3s ease;
			position: fixed;
			height: 100vh;
			z-index: 100;
			overflow: hidden;
		}

		:root[data-theme="light"] .sidebar {
			background: rgba(248, 249, 250, 0.95);
			border-right: 1px solid rgba(0, 0, 0, 0.1);
		}

		/* Default collapsed state for desktop */
		.sidebar-title,
		.sidebar .nav-text {
			display: none;
			opacity: 0;
			transition: all 0.3s ease;
		}

		.sidebar-header {
			display: flex;
			align-items: center;
			margin-bottom: 30px;
			padding: 0;
			justify-content: center;
			transition: all 0.3s ease;
		}

		.sidebar-logo {
			font-size: 24px;
			margin-right: 10px;
			background: linear-gradient(135deg, var(--primary-red) 0%, var(--primary-green) 100%);
			-webkit-background-clip: text;
			background-clip: text;
			color: transparent;
		}

		.sidebar-title {
			font-size: 20px;
			font-weight: 700;
			background: linear-gradient(135deg, var(--primary-red) 0%, var(--primary-green) 100%);
			-webkit-background-clip: text;
			background-clip: text;
			color: transparent;
			transition: all 0.3s ease;
		}

		.sidebar-img {
			width: 64px;
			height: 64px;
			transition: all 0.3s ease;
		}

		.nav-menu {
			list-style: none;
		}

		.nav-item {
			margin-bottom: 10px;
			text-align: center;
		}

		.nav-link {
			display: flex;
			align-items: center;
			padding: 12px;
			color: var(--text-dim);
			text-decoration: none;
			border-radius: 6px;
			transition: all 0.3s;
			justify-content: center;
			position: relative;
		}

		.nav-link:hover,
		.nav-link.active {
			background: rgba(255, 255, 255, 0.1);
			color: var(--text-light);
		}

		.nav-link.active {
			border-left: 3px solid var(--primary-green);
		}

		.nav-icon {
			margin-right: 0;
			font-size: 32px; /* Increased icon size */
			width: 32px;
			height: 32px;
			display: flex;
			align-items: center;
			justify-content: center;
			transition: all 0.3s ease;
		}

		/* Main Content */
		.main-content {
			flex: 1;
			padding: 30px;
			background: rgba(15, 22, 33, 0.5);
			margin-left: 70px; /* Adjusted for collapsed sidebar */
			transition: margin-left 0.3s ease;
		}

		:root[data-theme="light"] .main-content {
			background: rgba(248, 249, 250, 0.7);
		}

		.page-header {
			display: flex;
			justify-content: space-between;
			align-items: center;
			margin-bottom: 30px;
		}

		.page-title {
			font-size: 24px;
			font-weight: 600;
		}

		.user-profile {
			display: flex;
			align-items: center;
		}

		.user-avatar {
			width: 40px;
			height: 40px;
			border-radius: 50%;
			background: linear-gradient(135deg, var(--primary-red) 0%, var(--primary-green) 100%);
			display: flex;
			align-items: center;
			justify-content: center;
			margin-right: 10px;
			color: white;
			font-weight: 600;
		}

		.user-name {
			font-weight: 500;
		}

		/* Glass Card Base */
		.glass-card {
			background: var(--card-background);
			backdrop-filter: blur(10px);
			border: 1px solid rgba(255, 255, 255, 0.1);
			border-radius: 20px;
			box-shadow: 0 8px 32px var(--shadow-color);
			transition: var(--transition);
		}

		:root[data-theme="light"] .glass-card {
			border: 1px solid rgba(0, 0, 0, 0.1);
		}

		/* =================================
		   FLASH MESSAGES - ENHANCED
		   ================================= */
		.flash-messages {
			margin-bottom: 30px;
			margin-top: 20px;
			max-width: calc(100% - 40px);
		}

		/* Base flash message styles */
		.flash-info,
		.flash-success,
		.flash-error,
		.flash-warning {
			padding: 12px 16px;
			margin-bottom: 15px;
			border-radius: 8px;
			font-size: 14px;
			animation: fadeIn 0.3s ease-in-out;
			text-align: center;
			display: flex;
			align-items: center;
			justify-content: center;
			gap: 10px;
			border: 1px solid;
			max-width: 100%;
			box-sizing: border-box;
			position: relative;
		}

		/* Info messages (blue) */
		.flash-info {
			background: rgba(52, 152, 219, 0.1);
			border-color: var(--primary-blue);
			color: var(--primary-blue);
			box-shadow: 0 0 10px rgba(52, 152, 219, 0.3);
		}

		/* Success messages (green) */
		.flash-success {
			background: rgba(46, 204, 113, 0.1);
			border-color: var(--primary-green);
			color: var(--primary-green);
			box-shadow: var(--shadow-neon-green);
		}

		/* Error messages (red) */
		.flash-error {
			background: rgba(255, 62, 95, 0.1);
			border-color: var(--primary-red);
			color: var(--primary-red);
			box-shadow: var(--shadow-neon-red);
		}

		/* Warning messages (orange/yellow) */
		.flash-warning {
			background: rgba(255, 193, 7, 0.1);
			border-color: #ffc107;
			color: #ffc107;
			box-shadow: 0 0 10px rgba(255, 193, 7, 0.3);
		}

		/* Light theme adjustments */
		:root[data-theme="light"] .flash-info {
			background: rgba(52, 152, 219, 0.1);
			border-color: var(--primary-blue);
		}

		:root[data-theme="light"] .flash-success {
			background: rgba(39, 174, 96, 0.1);
			border-color: var(--primary-green);
		}

		:root[data-theme="light"] .flash-error {
			background: rgba(231, 76, 60, 0.1);
			border-color: var(--primary-red);
		}

		:root[data-theme="light"] .flash-warning {
			background: rgba(255, 193, 7, 0.1);
			border-color: #e0a800;
		}

		/* Enhanced close button styling */
		.flash-close {
			background: none;
			border: none;
			color: currentColor;
			opacity: 0.7;
			cursor: pointer;
			font-size: 20px; /* Increased from 16px */
			font-weight: 600; /* Added weight for better visibility */
			margin-left: auto;
			padding: 2px; /* Added small padding for better click area */
			width: 24px; /* Increased from 20px */
			height: 24px; /* Increased from 20px */
			display: flex;
			align-items: center;
			justify-content: center;
			border-radius: 50%;
			transition: all 0.2s ease;
			position: absolute;
			top: 50%;
			right: 12px;
			transform: translateY(-50%);
		}

		.flash-close:hover {
			opacity: 1;
			background: rgba(255, 255, 255, 0.1);
			transform: translateY(-50%) scale(1.1);
		}

		.flash-close:active {
			transform: translateY(-50%) scale(0.95);
		}

		/* =================================
		   VERIFICATION BANNER
		   ================================= */
		.verification-banner {
			background: #d60707ff;
			color: white;
			padding: 1rem 1.5rem;
			border-radius: 15px;
			margin-bottom: 2rem;
			display: flex;
			align-items: center;
			gap: 1rem;
			box-shadow: var(--shadow-neon-red);
			max-width: 100%;
			box-sizing: border-box;
		}

		.verification-banner .icon {
			font-size: 1.5rem;
		}

		/* =================================
		   WELCOME SECTION
		   ================================= */
		.welcome-card {
			padding: 20px;
			margin-bottom: 30px;
		}

		.welcome-card h2 {
			font-size: 18px;
			margin-bottom: 10px;
		}

		.welcome-card p {
			color: var(--text-dim);
			line-height: 1.6;
			font-size: 15px;
		}

		/* =================================
		   COMPETITION GRID
		   ================================= */
		.competition-grid {
			display: grid;
			grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
			gap: 20px;
			margin-top: 20px;
		}

		.competition-card {
			padding: 20px;
			transition: transform 0.3s, box-shadow 0.3s;
		}

		.competition-card:hover {
			transform: translateY(-5px);
			box-shadow: 0 10px 20px rgba(0, 0, 0, 0.2);
		}

		.competition-image {
			width: 100%;
			height: 160px;
			object-fit: cover;
			border-radius: 8px;
			margin-bottom: 15px;
			background: linear-gradient(135deg, rgba(255, 62, 95, 0.3) 0%, rgba(46, 204, 113, 0.3) 100%);
			display: flex;
			align-items: center;
			justify-content: center;
			color: white;
			font-size: 40px;
		}

		.competition-title {
			font-size: 18px;
			font-weight: 600;
			margin-bottom: 10px;
		}

		.competition-desc {
			color: var(--text-dim);
			font-size: 14px;
			margin-bottom: 15px;
			line-height: 1.5;
		}

		.competition-actions {
			display: flex;
			gap: 10px;
		}

		/* =================================
		   NO COMPETITIONS STYLING
		   ================================= */
		.no-competitions {
			grid-column: 1 / -1;
			text-align: center;
			padding: 40px 20px;
			color: var(--text-dim);
			position: relative;
			overflow: hidden;
		}

		.no-competitions p {
			font-size: 18px;
			margin-bottom: 30px;
			position: relative;
			z-index: 2;
		}

		/* =================================
		   BUTTONS
		   ================================= */
		.btn {
			padding: 8px 16px;
			border: none;
			border-radius: 6px;
			cursor: pointer;
			font-size: 14px;
			font-weight: 500;
			text-decoration: none;
			display: inline-block;
			transition: var(--transition);
		}

		.btn-outline {
			background: transparent;
			border: 1px solid var(--text-dim);
			color: var(--text-light);
		}

		.btn-outline:hover {
			background: rgba(255, 255, 255, 0.1);
		}

		.btn-green {
			background: linear-gradient(45deg, var(--primary-green) 0%, #52ee86ff 100%);
			color: white;
		}

		.btn-red:hover {
			transform: translateY(-2px);
			box-shadow: var(--shadow-neon-red);
		}

		/*dashboard image*/
		.competition-img {
			width: 150px;
			height: 128px;
		}

		/* =================================
		   SIDEBAR OVERLAY FOR MOBILE
		   ================================= */
		.sidebar-overlay {
			position: fixed;
			top: 0;
			left: 0;
			width: 100%;
			height: 100%;
			background: rgba(0, 0, 0, 0.5);
			z-index: 99;
			opacity: 0;
			visibility: hidden;
			transition: all 0.3s ease;
		}

		.sidebar-overlay.active {
			opacity: 1;
			visibility: visible;
		}

		/* =================================
		   RESPONSIVE DESIGN
		   ================================= */
		@media (max-width: 992px) {
			/* Mobile sidebar behavior - expand and show text/icons */
			.sidebar {
				width: 250px;
				transform: translateX(-100%);
				transition: transform 0.3s ease;
				padding: 25px 15px; /* Slightly reduced padding for mobile */
			}

			.sidebar.mobile-open {
				transform: translateX(0);
			}

			/* Show title and text on mobile */
			.sidebar-title,
			.sidebar .nav-text {
				display: block !important;
				opacity: 1 !important;
			}

			.sidebar-header {
				justify-content: flex-start !important;
				padding: 0 10px !important;
			}

			.sidebar-img {
				width: 64px !important;
				height: 64px !important;
			}

			.nav-link {
				justify-content: flex-start !important;
				padding: 12px 15px !important;
			}

			.nav-icon {
				margin-right: 10px !important;
				font-size: 18px !important;
			}

			.nav-item {
				text-align: left !important;
			}

			/* Hide tooltips on mobile */
			.nav-link::after {
				display: none !important;
			}

			.main-content {
				margin-left: 0;
			}

			.sidebar-toggle {
				display: flex;
			}
		}

		@media (max-width: 768px) {
			.dashboard-container {
				flex-direction: column;
			}

			.nav-menu {
				display: flex;
				flex-direction: column;
				gap: 10px;
			}

			.nav-item {
				margin-bottom: 0;
			}

			.main-content {
				padding: 20px;
			}

			.page-header {
				flex-direction: column;
				gap: 1rem;
				text-align: center;
				margin-top: 20px;
			}

			.competition-grid {
				grid-template-columns: 1fr;
			}

			/* Mobile flash message improvements */
			.flash-messages {
				margin-top: 70px;
				margin-left: auto;
				margin-right: auto;
				max-width: calc(100% - 20px); /* Reduced margin for mobile */
				padding: 0 10px; /* Added padding for better centering */
			}

			.flash-info,
			.flash-success,
			.flash-error,
			.flash-warning {
				padding: 14px 40px 14px 16px; /* More right padding for close button */
				margin-bottom: 12px;
				font-size: 14px;
				text-align: center;
				justify-content: center;
				border-radius: 10px;
				box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
			}

			/* Ensure close button is properly positioned on mobile */
			.flash-close {
				font-size: 22px; /* Slightly larger on mobile for touch */
				width: 26px;
				height: 26px;
				right: 10px;
			}

			.flash-close:hover {
				background: rgba(255, 255, 255, 0.15);
			}

			.theme-toggle {
				top: 10px;
			}

			.sidebar-toggle {
				top: 10px;
			}
		}

		@media (min-width: 993px) {
			.sidebar-toggle {
				display: none;
			}
		}
	</style>

	<!-- Theme Toggle Button -->
	<button id="darkModeToggle" class="theme-toggle">
		<span class="sun-icon">
			<svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" fill="currentColor" class="size-6">
				<path d="M12 2.25a.75.75 0 0 1 .75.75v2.25a.75.75 0 0 1-1.5 0V3a.75.75 0 0 1 .75-.75ZM7.5 12a4.5 4.5 0 1 1 9 0 4.5 4.5 0 0 1-9 0ZM18.894 6.166a.75.75 0 0 0-1.06-1.06l-1.591 1.59a.75.75 0 1 0 1.06 1.061l1.591-1.59ZM21.75 12a.75.75 0 0 1-.75.75h-2.25a.75.75 0 0 1 0-1.5H21a.75.75 0 0 1 .75.75ZM17.834 18.894a.75.75 0 0 0 1.06-1.06l-1.59-1.591a.75.75 0 1 0-1.061 1.06l1.59 1.591ZM12 18a.75.75 0 0 1 .75.75V21a.75.75 0 0 1-1.5 0v-2.25A.75.75 0 0 1 12 18ZM7.758 17.303a.75.75 0 0 0-1.061-1.06l-1.591 1.59a.75.75 0 0 0 1.06 1.061l1.591-1.59ZM6 12a.75.75 0 0 1-.75.75H3a.75.75 0 0 1 0-1.5h2.25A.75.75 0 0 1 6 12ZM6.697 7.757a.75.75 0 0 0 1.06-1.06l-1.59-1.591a.75.75 0 0 0-1.061 1.06l1.59 1.591Z"/>
			</svg>
		</span>
		<span class="moon-icon">
			<svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" fill="currentColor" class="size-6">
				<path fill-rule="evenodd" d="M9.528 1.718a.75.75 0 0 1 .162.819A8.97 8.97 0 0 0 9 6a9 9 0 0 0 9 9 8.97 8.97 0 0 0 3.463-.69a.75.75 0 0 1 .981.98 10.503 10.503 0 0 1-9.694 6.46c-5.799 0-10.5-4.7-10.5-10.5 0-4.368 2.667-8.112 6.46-9.694a.75.75 0 0 1 .818.162Z" clip-rule="evenodd"/>
			</svg>
		</span>
	</button>

	<!-- Sidebar Toggle Button with New Icons -->
	<button id="sidebarToggle" class="sidebar-toggle">
		<svg class="arrow-right-icon" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
			<path stroke-linecap="round" stroke-linejoin="round" d="M13.5 4.5 21 12m0 0-7.5 7.5M21 12H3" />
		</svg>
		<svg class="arrow-left-icon" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" style="display: none;">
			<path stroke-linecap="round" stroke-linejoin="round" d="M10.5 19.5 3 12m0 0 7.5-7.5M3 12h18" />
		</svg>
	</button>

	<!-- Sidebar Overlay for Mobile -->
	<div id="sidebarOverlay" class="sidebar-overlay"></div>

	<!-- Dashboard -->
	<div class="dashboard-container">
		<!-- Sidebar -->
		<div class="sidebar">
			<div class="sidebar-header">
				<span class="sidebar-logo"><img src="\images\MIA_Logo.png" class="sidebar-img"/></span>
				<span class="sidebar-title">INNOMIATE</span>
			</div>
			<ul class="nav-menu">
				<li class="nav-item">
					<a href="#" class="nav-link active" title="Tableau de bord">
						<span class="nav-icon">
							<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
								<path d="M11.47 3.84a.75.75 0 011.06 0l8.69 8.69a.75.75 0 101.06-1.06l-8.689-8.69a2.25 2.25 0 00-3.182 0l-8.69 8.69a.75.75 0 001.061 1.06l8.69-8.69z" />
								<path d="M12 5.432l8.159 8.159c.03.03.06.058.091.086v6.198c0 1.035-.84 1.875-1.875 1.875H15a.75.75 0 01-.75-.75v-4.5a.75.75 0 00-.75-.75h-3a.75.75 0 00-.75.75V21a.75.75 0 01-.75.75H5.625a1.875 1.875 0 01-1.875-1.875v-6.198a2.29 2.29 0 00.091-.086L12 5.43z" />
							</svg>
						</span>
						<span class="nav-text">Tableau de bord</span>
					</a>
				</li>
				<li class="nav-item">
					<a href="#" class="nav-link" title="Mon profil">
						<span class="nav-icon">
							<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
								<path fill-rule="evenodd" d="M7.5 6a4.5 4.5 0 119 0 4.5 4.5 0 01-9 0zM3.751 20.105a8.25 8.25 0 0116.498 0 .75.75 0 01-.437.695A18.683 18.683 0 0112 22.5c-2.786 0-5.433-.608-7.812-1.7a.75.75 0 01-.437-.695z" clip-rule="evenodd" />
							</svg>
						</span>
						<span class="nav-text">Mon profil</span>
					</a>
				</li>
				<li class="nav-item">
					<a href="#" class="nav-link" title="Mes invitations">
						<span class="nav-icon">
							<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
								<path d="M1.5 8.67v8.58a3 3 0 003 3h15a3 3 0 003-3V8.67l-8.928 5.493a3 3 0 01-3.144 0L1.5 8.67z" />
								<path d="M22.5 6.908V6.75a3 3 0 00-3-3h-15a3 3 0 00-3 3v.158l9.714 5.978a1.5 1.5 0 001.572 0L22.5 6.908z" />
							</svg>
						</span>
						<span class="nav-text">Mes invitations</span>
					</a>
				</li>
				<li class="nav-item">
					<a href="#" class="nav-link" title="Tableau des pitchs">
						<span class="nav-icon">
							<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
								<path fill-rule="evenodd" d="M14.615 1.595a.75.75 0 01.359.852L12.982 9.75h7.268a.75.75 0 01.548 1.262l-10.5 11.25a.75.75 0 01-1.272-.71l1.992-7.302H3.75a.75.75 0 01-.548-1.262l10.5-11.25a.75.75 0 01.913-.143z" clip-rule="evenodd" />
							</svg>
						</span>
						<span class="nav-text">Tableau des pitchs</span>
					</a>
				</li>
				<li class="nav-item" style="margin-top: 30px;">
					<a href="{{ path('app_logout') }}" class="nav-link" title="D√©connexion">
						<span class="nav-icon">
							<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
								<path fill-rule="evenodd" d="M7.5 3.75A1.5 1.5 0 006 5.25v13.5a1.5 1.5 0 001.5 1.5h6a1.5 1.5 0 001.5-1.5V15a.75.75 0 011.5 0v3.75a3 3 0 01-3 3h-6a3 3 0 01-3-3V5.25a3 3 0 013-3h6a3 3 0 013 3V9A.75.75 0 0115 9V5.25a1.5 1.5 0 00-1.5-1.5h-6zm5.03 4.72a.75.75 0 010 1.06l-1.72 1.72h10.94a.75.75 0 010 1.5H10.81l1.72 1.72a.75.75 0 11-1.06 1.06l-3-3a.75.75 0 010-1.06l3-3a.75.75 0 011.06 0z" clip-rule="evenodd" />
							</svg>
						</span>
						<span class="nav-text">D√©connexion</span>
					</a>
				</li>
			</ul>
		</div>

		<!-- Main Content -->
		<div class="main-content">
			{# Flash Messages #}
			<div class="flash-messages">
				{% for message in app.flashes('info') %}
					<div class="flash-info">
						<span class="icon">‚ÑπÔ∏è</span>
						{{ message }}
						<button type="button" class="flash-close" onclick="this.parentElement.remove()">√ó</button>
					</div>
				{% endfor %}

				{% for message in app.flashes('success') %}
					<div class="flash-success">
						<span class="icon">‚úÖ</span>
						{{ message }}
						<button type="button" class="flash-close" onclick="this.parentElement.remove()">√ó</button>
					</div>
				{% endfor %}

				{% for message in app.flashes('error') %}
					<div class="flash-error">
						<span class="icon">‚ùå</span>
						{{ message }}
						<button type="button" class="flash-close" onclick="this.parentElement.remove()">√ó</button>
					</div>
				{% endfor %}

				{% for message in app.flashes('warning') %}
					<div class="flash-warning">
						<span class="icon">‚ö†Ô∏è</span>
						{{ message }}
						<button type="button" class="flash-close" onclick="this.parentElement.remove()">√ó</button>
					</div>
				{% endfor %}
			</div>

			{# Email Verification Banner (show only if user is not verified) #}
			{% if app.user and not app.user.isVerified %}
				<div class="verification-banner">
					<span class="icon">üìß</span>
					<div>
						<strong>Veuillez v√©rifier votre adresse e-mail</strong><br>
						Consultez votre bo√Æte de r√©ception et cliquez sur le lien de v√©rification pour d√©bloquer toutes les fonctionnalit√©s.
					</div>
				</div>
			{% endif %}

			<div class="page-header">
				<h1 class="page-title">Dashboard</h1>
				<div class="user-profile">
					<div class="user-avatar">{{ app.user.firstName|first|upper }}</div>
					<span class="user-name">{{ app.user.firstName|title }}</span>
				</div>
			</div>

			<div class="glass-card welcome-card">
				<h2>Bon retour,
					{{ app.user.firstName }}
					!</h2>
				<p>Vous avez {{ invitationCount }} invitations en attente. D√©couvrez les derni√®res comp√©titions ci-dessous.</p>
			</div>

			<h2 style="font-size: 20px; margin-bottom: 20px;">Comp√©titions Actuelles</h2>

			<div class="competition-grid">
				{% if activeCompetitions is not empty %}
					{% for competition in activeCompetitions %}
						<div class="glass-card competition-card">
							<div class="competition-image">
								<img src="{{ asset(competition.imagePath) }}" alt="Competition image" class="competition-img"/>
							</div>
							<h3 class="competition-title">{{ competition.name }}</h3>
							<p class="competition-desc">{{ competition.description }}</p>
							<div class="competition-actions">
								<a href="{{ competition.moreInfoLink }}" class="btn btn-outline" target="_blank">En savoir plus</a>
								<a href="{{ path('app_participant') }}" class="btn btn-green">S'inscrire</a>
							</div>
						</div>
					{% endfor %}
				{% else %}
					<div class="glass-card no-competitions">
						<p>Aucune comp√©tition active pour le moment</p>
						<div id="tumbleweed" style="width: 100%; height: 300px;"></div>
					</div>
				{% endif %}
			</div>
		</div>
	</div>

	<script src="https://cdnjs.cloudflare.com/ajax/libs/bodymovin/5.7.6/lottie.min.js"></script>
	<script>
		// Dark Mode Toggle Functionality
		const themeToggle = document.getElementById('darkModeToggle');
		const sunIcon = themeToggle.querySelector('.sun-icon');
		const moonIcon = themeToggle.querySelector('.moon-icon');

		// Enhanced theme initialization for all pages
		function initializeTheme() {
			const savedTheme = localStorage.getItem('theme');
			const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;

			// Prioritize saved theme, fallback to system preference
			const defaultTheme = savedTheme || (prefersDark ? 'dark' : 'light');

			// Apply theme immediately to prevent flash
			document.documentElement.setAttribute('data-theme', defaultTheme);

			// Update toggle icons
			updateToggleIcons(defaultTheme === 'dark');

			// Save the theme if it wasn't saved before
			if (! savedTheme) {
				localStorage.setItem('theme', defaultTheme);
			}
		}

		function updateToggleIcons(isDark) {
			// Show sun icon when in dark mode (to switch to light)
			// Show moon icon when in light mode (to switch to dark)
			sunIcon.style.display = isDark ? 'inline-block' : 'none';
			moonIcon.style.display = isDark ? 'none' : 'inline-block';
		}

		function toggleTheme() {
			const currentTheme = document.documentElement.getAttribute('data-theme');
			const newTheme = currentTheme === 'dark' ? 'light' : 'dark';

			document.documentElement.setAttribute('data-theme', newTheme);
			localStorage.setItem('theme', newTheme);
			localStorage.setItem('theme-manually-set', 'true');
			updateToggleIcons(newTheme === 'dark');
		}

		// Initialize theme immediately
		initializeTheme();

		themeToggle.addEventListener('click', toggleTheme);
		themeToggle.addEventListener('keydown', function (e) {
			if (e.key === ' ' || e.key === 'Enter') {
				e.preventDefault();
				toggleTheme();
			}
		});

		// Enhanced Sidebar Toggle Functionality
		const sidebarToggle = document.getElementById('sidebarToggle');
		const sidebar = document.querySelector('.sidebar');
		const sidebarOverlay = document.getElementById('sidebarOverlay');
		const arrowRightIcon = sidebarToggle.querySelector('.arrow-right-icon');
		const arrowLeftIcon = sidebarToggle.querySelector('.arrow-left-icon');
		
		let isMobile = window.matchMedia('(max-width: 992px)').matches;
		
		function updateMobileState() {
			isMobile = window.matchMedia('(max-width: 992px)').matches;
			
			if (!isMobile) {
				// Desktop: remove mobile classes and reset icons
				sidebar.classList.remove('mobile-open');
				sidebarOverlay.classList.remove('active');
				document.body.style.overflow = '';
				// Reset to default arrow right icon for desktop
				arrowRightIcon.style.display = 'block';
				arrowLeftIcon.style.display = 'none';
			} else {
				// Mobile: ensure sidebar is hidden by default
				if (!sidebar.classList.contains('mobile-open')) {
					sidebar.classList.remove('mobile-open');
					sidebarOverlay.classList.remove('active');
					document.body.style.overflow = '';
					arrowRightIcon.style.display = 'block';
					arrowLeftIcon.style.display = 'none';
				}
			}
		}
		
		function toggleSidebar() {
			if (isMobile) {
				// Mobile behavior
				const isOpen = sidebar.classList.contains('mobile-open');
				
				if (isOpen) {
					closeMobileSidebar();
				} else {
					openMobileSidebar();
				}
			}
			// Desktop behavior removed since sidebar now works on hover
		}
		
		function openMobileSidebar() {
			sidebar.classList.add('mobile-open');
			sidebarOverlay.classList.add('active');
			document.body.style.overflow = 'hidden';
			// Switch to left arrow when sidebar is open
			arrowRightIcon.style.display = 'none';
			arrowLeftIcon.style.display = 'block';
		}
		
		function closeMobileSidebar() {
			sidebar.classList.remove('mobile-open');
			sidebarOverlay.classList.remove('active');
			document.body.style.overflow = '';
			// Switch back to right arrow when sidebar is closed
			arrowRightIcon.style.display = 'block';
			arrowLeftIcon.style.display = 'none';
		}
		
		// Event Listeners
		sidebarToggle.addEventListener('click', toggleSidebar);
		sidebarOverlay.addEventListener('click', closeMobileSidebar);
		
		// Close sidebar when clicking outside on mobile
		document.addEventListener('click', function(e) {
			if (isMobile && 
				sidebar.classList.contains('mobile-open') && 
				!sidebar.contains(e.target) && 
				!sidebarToggle.contains(e.target)) {
				closeMobileSidebar();
			}
		});
		
		// Handle window resize
		window.addEventListener('resize', updateMobileState);
		
		// Initialize on page load
		updateMobileState();
		
		// Keyboard accessibility
		sidebarToggle.addEventListener('keydown', function(e) {
			if (e.key === ' ' || e.key === 'Enter') {
				e.preventDefault();
				toggleSidebar();
			}
		});
		
		// Close sidebar with Escape key
		document.addEventListener('keydown', function(e) {
			if (e.key === 'Escape' && isMobile && sidebar.classList.contains('mobile-open')) {
				closeMobileSidebar();
			}
		});

		// Tumbleweed animation
		document.addEventListener('DOMContentLoaded', function() {
			const tumbleweedContainer = document.getElementById('tumbleweed');
			if (tumbleweedContainer) {
				lottie.loadAnimation({
					container: tumbleweedContainer,
					renderer: 'svg',
					loop: true,
					autoplay: true,
					path: '/images/Tumbleweed.json'
				});
			}
		});

		// Dashboard-specific functionality
		document.addEventListener('DOMContentLoaded', function () {
			// Auto-dismiss flash messages after 5 seconds
			const flashMessages = document.querySelectorAll('.flash-info, .flash-success, .flash-error, .flash-warning');
			flashMessages.forEach(message => {
				setTimeout(() => {
					if (message.parentNode) {
						message.style.transition = 'opacity 0.5s ease';
						message.style.opacity = '0';
						setTimeout(() => message.remove(), 500);
					}
				}, 5000);
			});

			// Add click animation to competition cards
			const cards = document.querySelectorAll('.competition-card');
			cards.forEach(card => {
				card.addEventListener('click', function (e) {
					// Only animate if clicking on the card itself, not a button
					if (e.target === this || (! e.target.closest('.btn') && ! e.target.closest('.competition-actions'))) {
						this.style.transform = 'scale(0.98)';
						setTimeout(() => {
							this.style.transform = '';
						}, 150);
					}
				});
			});

			// Add typing effect to welcome message
			const welcomeTitle = document.querySelector('.welcome-card h2');
			if (welcomeTitle) {
				const originalText = welcomeTitle.innerHTML;
				welcomeTitle.innerHTML = '';
				let i = 0;

				function typeWriter() {
					if (i < originalText.length) {
						welcomeTitle.innerHTML = originalText.substring(0, i + 1);
						i++;
						setTimeout(typeWriter, 50);
					}
				}

				setTimeout(typeWriter, 500);
			}

			// Add smooth navigation highlighting
			const navLinks = document.querySelectorAll('.nav-link');
			navLinks.forEach(link => {
				link.addEventListener('click', function (e) {
					// Remove active class from all links
					navLinks.forEach(l => l.classList.remove('active'));
					// Add active class to clicked link
					this.classList.add('active');
				});
			});
		});
	</script>
{% endblock %}