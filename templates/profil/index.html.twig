{% extends 'base.html.twig' %}

{% block title %}Profile
{% endblock %}

{% block body %}
	<style>:root
	{
		--primary-red: #ff3e5f;
		--primary-green: #2ecc71;
		--primary-blue: #667eea;
		--primary-purple: #764ba2;
		--primary-white: #ffffff;
		--dark-bg: #0f1621;
		--glass-bg: rgba(255, 255, 255, 0.05);
		--text-light: #f0f0f0;
		--text-dim: #b0b0b0;
		--shadow-neon-red: 0 0 10px rgba(255, 62, 95, 0.3);
		--shadow-neon-green: 0 0 10px rgba(46, 204, 113, 0.3);
		--shadow-neon-blue: 0 0 10px rgba(102, 126, 234, 0.3);
		--shadow-color: rgba(0, 0, 0, 0.3);
		--card-background: rgba(255, 255, 255, 0.1);
		--transition: all 0.3s ease;
	}

	:root[data-theme="light"] {
		--primary-red: #e74c3c;
		--primary-green: #27ae60;
		--primary-blue: #2980b9;
		--primary-purple: #8e44ad;
		--primary-white: #2c3e50;
		--dark-bg: #f8f9fa;
		--glass-bg: rgba(255, 255, 255, 0.95);
		--text-light: #2c3e50;
		--text-dim: #7f8c8d;
		--shadow-neon-red: 0 0 10px rgba(231, 76, 60, 0.2);
		--shadow-neon-green: 0 0 10px rgba(39, 174, 96, 0.2);
		--shadow-neon-blue: 0 0 10px rgba(41, 128, 185, 0.2);
		--shadow-color: rgba(0, 0, 0, 0.1);
		--card-background: rgba(255, 255, 255, 0.95);
	}

	/* =================================
   GLOBAL STYLES
   ================================= */
	* {
		margin: 0;
		padding: 0;
		box-sizing: border-box;
	}

	body {
		background: var(--dark-bg);
		color: var(--text-light);
		min-height: 100vh;
		font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
		transition: var(--transition);
	}

	/* =================================
   THEME TOGGLE COMPONENT
   ================================= */
	.theme-toggle {
		position: fixed;
		top: 20px;
		right: 20px;
		z-index: 999;
		background: var(--card-background);
		border: 2px solid var(--text-light);
		border-radius: 50px;
		padding: 8px;
		cursor: pointer;
		box-shadow: 0 4px 15px var(--shadow-color);
		transition: var(--transition);
		display: flex;
		align-items: center;
		gap: 6px;
		width: 40px;
		height: 40px;
	}

	.theme-toggle:hover {
		transform: scale(1.05);
		box-shadow: 0 6px 20px var(--shadow-color);
	}

	.theme-toggle .sun-icon,
	.theme-toggle .moon-icon {
		display: flex;
		align-items: center;
		justify-content: center;
	}

	.theme-toggle svg {
		width: 20px;
		height: 20px;
		display: block;
		color: currentColor;
		transition: var(--transition);
	}

	.theme-toggle .sun-icon svg {
		color: #ffa500;
	}

	.theme-toggle .moon-icon svg {
		color: #4cc9f0;
	}

	/* =================================
   SIDEBAR TOGGLE BUTTON
   ================================= */
	.sidebar-toggle {
		position: fixed;
		top: 20px;
		left: 20px;
		z-index: 1000;
		background: var(--card-background);
		border: 2px solid var(--text-light);
		border-radius: 50px;
		padding: 8px;
		cursor: pointer;
		box-shadow: 0 4px 15px var(--shadow-color);
		transition: var(--transition);
		display: flex;
		align-items: center;
		justify-content: center;
		width: 40px;
		height: 40px;
	}

	.sidebar-toggle:hover {
		transform: scale(1.05);
		box-shadow: 0 6px 20px var(--shadow-color);
	}

	.sidebar-toggle svg {
		width: 20px;
		height: 20px;
		color: var(--text-light);
		transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
	}

	/* =================================
   DASHBOARD LAYOUT
   ================================= */
	.dashboard-container {
		display: flex;
		min-height: 100vh;
		position: relative;
	}

	/* Sidebar - Enhanced with desktop collapse and mobile behavior */
	.sidebar {
		width: 80px; /* Default collapsed width on desktop */
		background: rgba(15, 22, 33, 0.9);
		backdrop-filter: blur(10px);
		padding: 20px 15px; /* Reduced top padding slightly */
		border-right: 1px solid rgba(255, 255, 255, 0.1);
		transition: all 0.3s ease;
		position: fixed;
		height: 100vh;
		z-index: 100;
		overflow: hidden;
	}

	:root[data-theme="light"] .sidebar {
		background: rgba(248, 249, 250, 0.95);
		border-right: 1px solid rgba(0, 0, 0, 0.1);
	}

	/* Default collapsed state for desktop */
	.sidebar-title,
	.sidebar .nav-text {
		display: none;
		opacity: 0;
		transition: all 0.3s ease;
	}

	.sidebar-header {
		display: flex;
		align-items: center;
		margin-bottom: 30px;
		padding: 0;
		justify-content: center;
		transition: all 0.3s ease;
		text-decoration: none;
		color: inherit; /* Prevents link color styling */
	}

	.sidebar-header {
		text-decoration: none !important;  /* Ensures no underline on hover */
	}

	.sidebar-logo {
		font-size: 24px;
		margin-right: 10px;
		background: linear-gradient(135deg, var(--primary-red) 0%, var(--primary-green) 100%);
		-webkit-background-clip: text;
		background-clip: text;
		color: transparent;
	}

	.sidebar-title {
		font-size: 20px;
		font-weight: 700;
		background: linear-gradient(135deg, var(--primary-red) 0%, var(--primary-green) 100%);
		-webkit-background-clip: text;
		background-clip: text;
		color: transparent;
		transition: all 0.3s ease;
	}

	.sidebar-img {
		width: 64px;
		height: 64px;
		transition: all 0.3s ease;
	}

	.nav-menu {
		list-style: none;
	}

	.nav-item {
		margin-bottom: 10px;
		text-align: center;
	}

	.nav-link {
		display: flex;
		align-items: center;
		padding: 12px;
		color: var(--text-dim);
		text-decoration: none;
		border-radius: 6px;
		transition: all 0.3s;
		justify-content: center;
		position: relative;
	}

	.nav-link:hover,
	.nav-link.active {
		background: rgba(255, 255, 255, 0.1);
		color: var(--text-light);
	}

	.nav-link.active {
		border-left: 3px solid var(--primary-green);
	}

	.nav-icon {
		margin-right: 0;
		font-size: 32px; /* Increased icon size */
		width: 32px;
		height: 32px;
		display: flex;
		align-items: center;
		justify-content: center;
		transition: all 0.3s ease;
	}

	/* Main Content */
	.main-content {
		flex: 1;
		padding: 30px;
		background: rgba(15, 22, 33, 0.5);
		margin-left: 70px; /* Adjusted for collapsed sidebar */
		transition: margin-left 0.3s ease;
	}

	:root[data-theme="light"] .main-content {
		background: rgba(248, 249, 250, 0.7);
	}

	.page-header {
		display: flex;
		justify-content: space-between;
		align-items: center;
		margin-bottom: 30px;
	}

	.page-title {
		font-size: 24px;
		font-weight: 600;
	}

	.user-profile {
		display: flex;
		align-items: center;
	}

	.user-avatar {
		width: 40px;
		height: 40px;
		border-radius: 50%;
		background: linear-gradient(135deg, var(--primary-red) 0%, var(--primary-green) 100%);
		display: flex;
		align-items: center;
		justify-content: center;
		margin-right: 10px;
		color: white;
		font-weight: 600;
	}

	.user-name {
		font-weight: 500;
	}

	/* Glass Card Base */
	.glass-card {
		background: var(--card-background);
		backdrop-filter: blur(10px);
		border: 1px solid rgba(255, 255, 255, 0.1);
		border-radius: 20px;
		box-shadow: 0 8px 32px var(--shadow-color);
		transition: var(--transition);
	}

	:root[data-theme="light"] .glass-card {
		border: 1px solid rgba(0, 0, 0, 0.1);
	}

	/* =================================
   SIDEBAR OVERLAY FOR MOBILE
   ================================= */
	.sidebar-overlay {
		position: fixed;
		top: 0;
		left: 0;
		width: 100%;
		height: 100%;
		background: rgba(0, 0, 0, 0.5);
		z-index: 99;
		opacity: 0;
		visibility: hidden;
		transition: all 0.3s ease;
	}

	.sidebar-overlay.active {
		opacity: 1;
		visibility: visible;
	}

	/* =================================
   PROFILE SPECIFIC STYLES
   ================================= */
	.profile-container {
		max-width: 900px;
		margin: 0 auto;
	}

	.profile-card {
		padding: 20px;
		margin-bottom: 30px;
	}

	.profile-header {
		background: linear-gradient(45deg, var(--primary-red), var(--primary-green));
		padding: 3rem 2rem;
		text-align: center;
		position: relative;
		overflow: hidden;
		border-radius: 20px;
		margin-bottom: 20px;
	}

	.profile-header::before {
		content: '';
		position: absolute;
		top: -50%;
		left: -50%;
		width: 200%;
		height: 200%;
		background: repeating-linear-gradient(45deg, transparent, transparent 10px, rgba(255,255,255,0.1) 10px, rgba(255,255,255,0.1) 20px);
		animation: movePattern 20s linear infinite;
	}

	@keyframes movePattern {
		0% {
			transform: translate(-50%, -50%) rotate(0deg);
		}
		100% {
			transform: translate(-50%, -50%) rotate(360deg);
		}
	}

	.profile-image {
		width: 120px;
		height: 120px;
		border-radius: 50%;
		border: 5px solid var(--primary-white);
		margin: 0 auto 1rem;
		background: rgba(255, 255, 255, 0.2);
		display: flex;
		align-items: center;
		justify-content: center;
		position: relative;
		z-index: 2;
		transition: transform 0.3s ease;
		cursor: pointer;
	}

	.profile-image:hover {
		transform: scale(1.05);
		border-color: var(--primary-green);
	}

	.profile-title {
		color: var(--primary-white);
		font-size: 2.5rem;
		font-weight: 300;
		margin-bottom: 0.5rem;
		position: relative;
		z-index: 2;
	}

	.profile-info {
		padding: 2rem;
	}

	.info-item {
		background: rgba(255, 62, 95, 0.05);
		border-radius: 10px;
		padding: 1rem;
		margin-bottom: 1rem;
		border-left: 4px solid var(--primary-red);
		transition: all 0.3s ease;
	}

	.info-item:hover {
		background: rgba(46, 204, 113, 0.1);
		transform: translateX(5px);
		border-left-color: var(--primary-green);
	}

	.info-label {
		font-weight: 600;
		color: var(--primary-red);
		font-size: 0.9rem;
		text-transform: uppercase;
		letter-spacing: 1px;
		margin-bottom: 0.5rem;
	}

	.info-value {
		color: var(--text-light);
		font-size: 1.1rem;
		display: flex;
		align-items: center;
		gap: 0.5rem;
	}

	.competitions-section {
		background: var(--card-background);
		backdrop-filter: blur(10px);
		border-radius: 20px;
		box-shadow: 0 8px 32px var(--shadow-color);
		padding: 2rem;
		border: 1px solid rgba(255, 255, 255, 0.1);
	}

	.section-title {
		color: var(--primary-white);
		font-size: 2rem;
		font-weight: 300;
		margin-bottom: 2rem;
		text-align: center;
		position: relative;
	}

	.section-title::after {
		content: '';
		display: block;
		width: 50px;
		height: 3px;
		background: linear-gradient(90deg, var(--primary-red), var(--primary-green));
		margin: 0.5rem auto;
		border-radius: 2px;
	}

	.competition-grid {
		display: grid;
		grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
		gap: 1.5rem;
	}

	.competition-item {
		background: linear-gradient(135deg, rgba(255, 62, 95, 0.05), rgba(46, 204, 113, 0.05));
		border-radius: 15px;
		padding: 1.5rem;
		border: 2px solid transparent;
		transition: all 0.3s ease;
		position: relative;
		overflow: hidden;
	}

	.competition-item::before {
		content: '';
		position: absolute;
		top: 0;
		left: 0;
		right: 0;
		height: 4px;
		background: linear-gradient(90deg, var(--primary-red), var(--primary-green));
	}

	.competition-item:hover {
		transform: translateY(-5px);
		box-shadow: var(--shadow-neon-red);
		border-color: rgba(46, 204, 113, 0.3);
		background: linear-gradient(135deg, rgba(255, 62, 95, 0.1), rgba(46, 204, 113, 0.1));
	}

	.competition-name {
		font-size: 1.2rem;
		font-weight: 600;
		color: var(--primary-red);
		margin-bottom: 1rem;
		display: flex;
		align-items: center;
		gap: 0.5rem;
	}

	.competition-codes {
		display: flex;
		gap: 1rem;
		flex-wrap: wrap;
	}

	.code-item {
		background: var(--card-background);
		border-radius: 8px;
		padding: 0.8rem 1.2rem;
		border: 2px solid rgba(255, 62, 95, 0.2);
		transition: all 0.3s ease;
		display: flex;
		align-items: center;
		gap: 0.5rem;
		cursor: pointer;
	}

	.code-item:hover {
		background: var(--primary-green);
		color: var(--primary-white);
		transform: scale(1.05);
		border-color: var(--primary-green);
	}

	.code-label {
		font-weight: 600;
		font-size: 0.9rem;
	}

	.code-value {
		background: rgba(255, 62, 95, 0.1);
		padding: 0.2rem 0.5rem;
		border-radius: 4px;
		font-family: 'Courier New', monospace;
		font-weight: bold;
		color: var(--primary-red);
	}

	.code-item:hover .code-value {
		background: rgba(255, 255, 255, 0.2);
		color: var(--primary-white);
	}

	.edit-btn {
		position: absolute;
		top: 1rem;
		right: 1rem;
		background: rgba(255, 255, 255, 0.2);
		border: none;
		border-radius: 50%;
		width: 40px;
		height: 40px;
		color: var(--primary-white);
		transition: all 0.3s ease;
		z-index: 3;
	}

	.edit-btn:hover {
		background: rgba(255, 255, 255, 0.3);
		transform: scale(1.1);
	}

	.add-competition-btn {
		background: linear-gradient(45deg, var(--primary-red), var(--primary-green));
		color: var(--primary-white);
		border: none;
		border-radius: 50px;
		padding: 1rem 2rem;
		font-weight: 600;
		text-transform: uppercase;
		letter-spacing: 1px;
		transition: all 0.3s ease;
		margin-top: 2rem;
		display: block;
		margin-left: auto;
		margin-right: auto;
	}

	.add-competition-btn:hover {
		transform: translateY(-2px);
		box-shadow: var(--shadow-neon-green);
	}

/* =================================
   TEAM SECTION STYLES
   ================================= */
.teams-section {
    background: var(--card-background);
    backdrop-filter: blur(10px);
    border-radius: 20px;
    box-shadow: 0 8px 32px var(--shadow-color);
    padding: 2rem;
    border: 1px solid rgba(255, 255, 255, 0.1);
    margin-top: 30px;
}

.team-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
    gap: 1.5rem;
}

.team-item {
    background: linear-gradient(135deg, rgba(255, 62, 95, 0.05), rgba(46, 204, 113, 0.05));
    border-radius: 15px;
    padding: 1.5rem;
    border: 2px solid transparent;
    transition: all 0.3s ease;
    position: relative;
    overflow: hidden;
}

.team-item::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 4px;
    background: linear-gradient(90deg, var(--primary-red), var(--primary-green));
}

.team-item:hover {
    transform: translateY(-5px);
    box-shadow: var(--shadow-neon-red);
    border-color: rgba(46, 204, 113, 0.3);
    background: linear-gradient(135deg, rgba(255, 62, 95, 0.1), rgba(46, 204, 113, 0.1));
}

.team-name {
    font-size: 1.2rem;
    font-weight: 600;
    color: var(--primary-red);
    margin-bottom: 1.5rem;
    display: flex;
    align-items: center;
    gap: 0.5rem;
}

.team-members {
    display: flex;
    flex-direction: column;
    gap: 1rem;
}

.team-member {
    background: var(--card-background);
    border-radius: 8px;
    padding: 1rem;
    border: 2px solid rgba(255, 62, 95, 0.2);
    transition: all 0.3s ease;
    display: flex;
    align-items: center;
    justify-content: space-between;
    position: relative;
}

.team-member:hover {
    background: rgba(255, 62, 95, 0.05);
    border-color: var(--primary-red);
}

.member-info {
    display: flex;
    align-items: center;
    gap: 0.8rem;
}

.name-value {
    font-weight: 500;
    color: var(--text-light);
}

.isUser {
    background: linear-gradient(45deg, var(--primary-red), var(--primary-green));
    color: var(--primary-white);
    padding: 0.3rem 0.8rem;
    border-radius: 4px;
    font-size: 0.8rem;
    font-weight: 600;
    margin-left: 1rem;
}

.member-role {
    background: rgba(46, 204, 113, 0.1);
    color: var(--primary-green);
    padding: 0.3rem 0.8rem;
    border-radius: 4px;
    font-size: 0.8rem;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    border: 1px solid rgba(46, 204, 113, 0.3);
}

.team-leader .member-role {
    background: linear-gradient(45deg, var(--primary-red), var(--primary-green));
    color: var(--primary-white);
    border: none;
}

	@media(min-width: 993px) {
		.sidebar-toggle {
			display: none; /* Cache le bouton toggle sur desktop */
		}
	}

	/* =================================
   RESPONSIVE DESIGN
   ================================= */
	@media(max-width: 992px) {
		/* Mobile sidebar behavior - expand and show text/icons */
		.sidebar {
			width: 250px;
			transform: translateX(-100%);
			transition: transform 0.3s ease;
			padding: 25px 15px;
		}


		.sidebar.mobile-open {
			transform: translateX(0);
		}

		/* Show title and text on mobile */
		.sidebar-title,
		.sidebar .nav-text {
			display: block !important;
			opacity: 1 !important;
		}

		.sidebar-header {
			justify-content: flex-start !important;
			padding: 0 10px !important;
		}

		.sidebar-img {
			width: 64px !important;
			height: 64px !important;
		}

		.nav-link {
			justify-content: flex-start !important;
			padding: 12px 15px !important;
		}

		.nav-icon {
			margin-right: 10px !important;
			font-size: 18px !important;
		}

		.nav-item {
			text-align: left !important;
		}

		.main-content {
			margin-left: 0;
		}

		.sidebar-toggle {
			display: flex;
		}
	}

	@media(max-width: 768px) {
		.profile-title {
			font-size: 2rem;
		}

		.competition-grid {
			grid-template-columns: 1fr;
		}

		.profile-info {
			padding: 1.5rem;
		}

		.main-content {
			padding: 1rem;
		}
		.team-member {
            flex-direction: row;
            align-items: flex-start;
            gap: 0.8rem;
        }
        
        .member-info {
            width: 100%;
            align-self: flex-end;
            justify-content: space-between;
        }
        
        .member-role, .isUser {
            justify-content: space-between;
        }
	}
</style>

<!-- Theme Toggle Button -->
<button id="darkModeToggle" class="theme-toggle">
	<span class="sun-icon">
		<svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" fill="currentColor" class="size-6">
			<path d="M12 2.25a.75.75 0 0 1 .75.75v2.25a.75.75 0 0 1-1.5 0V3a.75.75 0 0 1 .75-.75ZM7.5 12a4.5 4.5 0 1 1 9 0 4.5 4.5 0 0 1-9 0ZM18.894 6.166a.75.75 0 0 0-1.06-1.06l-1.591 1.59a.75.75 0 1 0 1.06 1.061l1.591-1.59ZM21.75 12a.75.75 0 0 1-.75.75h-2.25a.75.75 0 0 1 0-1.5H21a.75.75 0 0 1 .75.75ZM17.834 18.894a.75.75 0 0 0 1.06-1.06l-1.59-1.591a.75.75 0 1 0-1.061 1.06l1.59 1.591ZM12 18a.75.75 0 0 1 .75.75V21a.75.75 0 0 1-1.5 0v-2.25A.75.75 0 0 1 12 18ZM7.758 17.303a.75.75 0 0 0-1.061-1.06l-1.591 1.59a.75.75 0 0 0 1.06 1.061l1.591-1.59ZM6 12a.75.75 0 0 1-.75.75H3a.75.75 0 0 1 0-1.5h2.25A.75.75 0 0 1 6 12ZM6.697 7.757a.75.75 0 0 0 1.06-1.06l-1.59-1.591a.75.75 0 0 0-1.061 1.06l1.59 1.591Z"/>
		</svg>
	</span>
	<span class="moon-icon">
		<svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" fill="currentColor" class="size-6">
			<path fill-rule="evenodd" d="M9.528 1.718a.75.75 0 0 1 .162.819A8.97 8.97 0 0 0 9 6a9 9 0 0 0 9 9 8.97 8.97 0 0 0 3.463-.69a.75.75 0 0 1 .981.98 10.503 10.503 0 0 1-9.694 6.46c-5.799 0-10.5-4.7-10.5-10.5 0-4.368 2.667-8.112 6.46-9.694a.75.75 0 0 1 .818.162Z" clip-rule="evenodd"/>
		</svg>
	</span>
</button>

<!-- Sidebar Toggle Button with New Icons -->
<button id="sidebarToggle" class="sidebar-toggle">
	<svg class="arrow-right-icon" xmlns="http://www.w3.org/2000/svg" fill="none" viewbox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
		<path stroke-linecap="round" stroke-linejoin="round" d="M13.5 4.5 21 12m0 0-7.5 7.5M21 12H3"/>
	</svg>
	<svg class="arrow-left-icon" xmlns="http://www.w3.org/2000/svg" fill="none" viewbox="0 0 24 24" stroke-width="1.5" stroke="currentColor" style="display: none;">
		<path stroke-linecap="round" stroke-linejoin="round" d="M10.5 19.5 3 12m0 0 7.5-7.5M3 12h18"/>
	</svg>
</button>

<!-- Sidebar Overlay for Mobile -->
<div id="sidebarOverlay" class="sidebar-overlay"></div>

<!-- Dashboard -->
<div
	class="dashboard-container">
	<!-- Sidebar -->
	<div class="sidebar">
		<div>
			<a href="{{ path('app_dashboard') }}" class="sidebar-header" onclick="window.location=this.href; return false;">
				<span class="sidebar-logo"><img src="\images\MIA_Logo.png" class="sidebar-img"/></span>
				<span class="sidebar-title">INNOMIATE</span>
			</a>
		</div>
		<ul class="nav-menu">
			<li class="nav-item">
				<a href="{{path('app_dashboard')}}" class="nav-link" title="Tableau de bord" onclick="window.location=this.href; return false;">
					<span class="nav-icon">
						<svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" fill="currentColor">
							<path d="M11.47 3.84a.75.75 0 011.06 0l8.69 8.69a.75.75 0 101.06-1.06l-8.689-8.69a2.25 2.25 0 00-3.182 0l-8.69 8.69a.75.75 0 001.061 1.06l8.69-8.69z"/>
							<path d="M12 5.432l8.159 8.159c.03.03.06.058.091.086v6.198c0 1.035-.84 1.875-1.875 1.875H15a.75.75 0 01-.75-.75v-4.5a.75.75 0 00-.75-.75h-3a.75.75 0 00-.75.75V21a.75.75 0 01-.75.75H5.625a1.875 1.875 0 01-1.875-1.875v-6.198a2.29 2.29 0 00.091-.086L12 5.43z"/>
						</svg>
					</span>
					<span class="nav-text">Tableau de bord</span>
				</a>
			</li>
			<li class="nav-item">
				<a href="{{path('app_profil')}}" class="nav-link active" title="Mon profil" onclick="window.location=this.href; return false;">
					<span class="nav-icon">
						<svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" fill="currentColor">
							<path fill-rule="evenodd" d="M7.5 6a4.5 4.5 0 119 0 4.5 4.5 0 01-9 0zM3.751 20.105a8.25 8.25 0 0116.498 0 .75.75 0 01-.437.695A18.683 18.683 0 0112 22.5c-2.786 0-5.433-.608-7.812-1.7a.75.75 0 01-.437-.695z" clip-rule="evenodd"/>
						</svg>
					</span>
					<span class="nav-text">Mon profil</span>
				</a>
			</li>
			<li class="nav-item">
				<a href="{{ path('team_invitations') }}" class="nav-link" title="Mes invitations" onclick="window.location=this.href; return false;">
					<span class="nav-icon">
						<svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" fill="currentColor">
							<path d="M1.5 8.67v8.58a3 3 0 003 3h15a3 3 0 003-3V8.67l-8.928 5.493a3 3 0 01-3.144 0L1.5 8.67z"/>
							<path d="M22.5 6.908V6.75a3 3 0 00-3-3h-15a3 3 0 00-3 3v.158l9.714 5.978a1.5 1.5 0 001.572 0L22.5 6.908z"/>
						</svg>
					</span>
					<span class="nav-text">Mes invitations</span>
				</a>
			</li>
			<li class="nav-item">
				<a href="{{ path('app_pitches') }}" class="nav-link" title="Tableau des pitchs" onclick="window.location=this.href; return false;">
					<span class="nav-icon">
						<svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" fill="currentColor">
							<path fill-rule="evenodd" d="M14.615 1.595a.75.75 0 01.359.852L12.982 9.75h7.268a.75.75 0 01.548 1.262l-10.5 11.25a.75.75 0 01-1.272-.71l1.992-7.302H3.75a.75.75 0 01-.548-1.262l10.5-11.25a.75.75 0 01.913-.143z" clip-rule="evenodd"/>
						</svg>
					</span>
					<span class="nav-text">Tableau des pitchs</span>
				</a>
			</li>

			<li class="nav-item">
				<a href="{{ path('support') }}" class="nav-link" title="Aide" onclick="window.location=this.href; return false;">
					<span class="nav-icon">
						<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewbox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="size-6">
							<path stroke-linecap="round" stroke-linejoin="round" d="M9.879 7.519c1.171-1.025 3.071-1.025 4.242 0 1.172 1.025 1.172 2.687 0 3.712-.203.179-.43.326-.67.442-.745.361-1.45.999-1.45 1.827v.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9 5.25h.008v.008H12v-.008Z"/>
						</svg>
					</span>
					<span class="nav-text">Aide</span>
				</a>
			</li>

			<li class="nav-item" style="margin-top: 50px;">
				<a href="{{ path('app_logout') }}" class="nav-link" title="Déconnexion" onclick="window.location=this.href; return false;">
					<span class="nav-icon">
						<svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" fill="currentColor">
							<path fill-rule="evenodd" d="M7.5 3.75A1.5 1.5 0 006 5.25v13.5a1.5 1.5 0 001.5 1.5h6a1.5 1.5 0 001.5-1.5V15a.75.75 0 011.5 0v3.75a3 3 0 01-3 3h-6a3 3 0 01-3-3V5.25a3 3 0 013-3h6a3 3 0 013 3V9A.75.75 0 0115 9V5.25a1.5 1.5 0 00-1.5-1.5h-6zm5.03 4.72a.75.75 0 010 1.06l-1.72 1.72h10.94a.75.75 0 010 1.5H10.81l1.72 1.72a.75.75 0 11-1.06 1.06l-3-3a.75.75 0 010-1.06l3-3a.75.75 0 011.06 0z" clip-rule="evenodd"/>
						</svg>
					</span>
					<span class="nav-text">Déconnexion</span>
				</a>
			</li>
		</ul>
	</div>

	<!-- Main Content -->
	<div class="main-content">
		<div
			class="profile-container">
			<!--section profile-->
			<div class="glass-card profile-card" id="profileSection">
				<div class="profile-header">
				    <!--still under devloppment in future
					<button
						class="edit-btn" onclick="editProfile()" title="Fonctionnalité en cours de développement">
						<i class="fas fa-edit"></i>
					</button>
					 -->
					<div class="profile-image" onclick="changePhoto()">
						<i class="fas fa-user"></i>
					</div>
					<h1 class="profile-title">Votre Profil</h1>
				</div>
				<div class="profile-info">
					<div class="info-item">
						<div class="info-label">Nom Complet</div>
						<div class="info-value">
							<i class="fas fa-user text-muted"></i>
							<span id="fullName">{{user.firstName}}
								{{user.lastName}}</span>
						</div>
					</div>
					<div class="info-item">
						<div class="info-label">Email</div>
						<div class="info-value">
							<i class="fas fa-envelope text-muted"></i>
							<span id="email">{{user.email}}</span>
						</div>
					</div>
				</div>
			</div>

			<!-- section Compétitions-->
			{% if participant %}
			<div class="glass-card competitions-section" id="competitionsSection">
				<h2 class="section-title">
					<i class="fas fa-trophy"></i>
					Compétitions
				</h2>
				<div class="competition-grid" id="competitionGrid">
					<div class="competition-item">
						<div class="competition-name">
							<i class="fas fa-code"></i>
							{{ participant.competition.name }}
						</div>
						<div class="competition-codes">
							<div class="code-item" onclick="copyCode(this)">
								<span class="code-label">Code participant:</span>
								<span class="code-value">{{participant and participant.participantCode ? participant.participantCode : 'Vous n’avez pas encore participé à une compétition'}}</span>
							</div>
							<div class="code-item" onclick="copyCode(this)">
								<span class="code-label">Code équipe:</span>
								<span class="code-value">{{ participant and participant.team and participant.team.teamCode ? participant.team.teamCode : 'Vous n’avez pas encore rejoint ou créé d’équipe' }}</span>
							</div>
						</div>
					</div>
				</div>

			</div>
			{% endif %}
			{#si on travail avec id competition<!-- Section Compétitions -->
			<div class="glass-card competitions-section" id="competitionsSection">
			    <h2 class="section-title">
			        <i class="fas fa-trophy"></i>
			        Compétitions
			    </h2>
			    <div class="competition-grid" id="competitionGrid">
			        {% if participant.competition %}
			        <div class="competition-item">
			            <div class="competition-name">
			                <i class="fas fa-code"></i>
			                {{ participant.competition.name }}
			            </div>
			            <div class="competition-codes">
			                <div class="code-item" onclick="copyCode(this)">
			                    <span class="code-label">Code participant:</span>
			                    <span class="code-value">#{{ participant.participantCode }}</span>
			                </div>
			                {% if participant.team and participant.team.code %}
			                <div class="code-item" onclick="copyCode(this)">
			                    <span class="code-label">Code équipe:</span>
			                    <span class="code-value">#{{ participant.team.code }}</span>
			                </div>
			                {% else %}
			                <div class="code-item" style="background-color: #ffebee; color: #c62828;">
			                    <span class="code-label">Statut équipe:</span>
			                    <span class="code-value">Vous n'avez pas encore d'équipe</span>
			                </div>
			                {% endif %}
			            </div>
			        </div>
			        {% else %}
			        <div class="no-competition" style="text-align: center; padding: 20px;">
			            <p style="color: var(--text-dim);">
			                <i class="fas fa-info-circle"></i> Vous ne participez à aucune compétition actuellement
			            </p>
			        </div>
			        {% endif %}
			    </div>
			</div>#}
			{% if team %}
				<!-- section teams -->
				<div class="glass-card teams-section" id="teamsSection">
					<h2 class="section-title">
						<i class="fas fa-users"></i>
						Équipe
					</h2>
					<div class="team-grid" id="membresGrid">
						<div class="team-item">
							<div class="team-name">
								<i class="fas fa-flag"></i>
								{{ team.name }}
							</div>
							<div class="team-members">
								{% for membre in membres %}
									<div class="team-member {% if membre.isTeamLeader %}team-leader{% endif %}">
										<div class="member-info">
											<span class="name-value">{{membre.user.firstName}}
												{{membre.user.lastName}}</span>
										</div>
                                        {% if membre == participant %}
                                        <div class="isUser">
                                            <span>MOI</span>
                                        </div>
                                        {% endif %}
										<span class="member-role">
											{% if membre.isTeamLeader %}
												Leader
											{% else %}
												Membre
											{% endif %}
										</span>
									</div>
								{% endfor %}
							</div>
						</div>
					</div>
				</div>
			{% endif %}
		</div>
	</div>
</div>

<script>
	// Dark Mode Toggle Functionality
const themeToggle = document.getElementById('darkModeToggle');
const sunIcon = themeToggle.querySelector('.sun-icon');
const moonIcon = themeToggle.querySelector('.moon-icon');

// Enhanced theme initialization for all pages
function initializeTheme() {
const savedTheme = localStorage.getItem('theme');
const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;

// Prioritize saved theme, fallback to system preference
const defaultTheme = savedTheme || (prefersDark ? 'dark' : 'light');

// Apply theme immediately to prevent flash
document.documentElement.setAttribute('data-theme', defaultTheme);

// Update toggle icons
updateToggleIcons(defaultTheme === 'dark');

// Save the theme if it wasn't saved before
if (! savedTheme) {
localStorage.setItem('theme', defaultTheme);
}
}

function updateToggleIcons(isDark) {
// Show sun icon when in dark mode (to switch to light)
// Show moon icon when in light mode (to switch to dark)
sunIcon.style.display = isDark ? 'inline-block' : 'none';
moonIcon.style.display = isDark ? 'none' : 'inline-block';
}

function toggleTheme() {
const currentTheme = document.documentElement.getAttribute('data-theme');
const newTheme = currentTheme === 'dark' ? 'light' : 'dark';

document.documentElement.setAttribute('data-theme', newTheme);
localStorage.setItem('theme', newTheme);
localStorage.setItem('theme-manually-set', 'true');
updateToggleIcons(newTheme === 'dark');
}

// Initialize theme immediately
initializeTheme();

themeToggle.addEventListener('click', toggleTheme);
themeToggle.addEventListener('keydown', function (e) {
if (e.key === ' ' || e.key === 'Enter') {
e.preventDefault();
toggleTheme();
}
});

// Enhanced Sidebar Toggle Functionality
const sidebarToggle = document.getElementById('sidebarToggle');
const sidebar = document.querySelector('.sidebar');
const sidebarOverlay = document.getElementById('sidebarOverlay');
const arrowRightIcon = sidebarToggle.querySelector('.arrow-right-icon');
const arrowLeftIcon = sidebarToggle.querySelector('.arrow-left-icon');

let isMobile = window.matchMedia('(max-width: 992px)').matches;

function updateMobileState() {
isMobile = window.matchMedia('(max-width: 992px)').matches;

if (! isMobile) { // Desktop: remove mobile classes and reset icons
sidebar.classList.remove('mobile-open');
sidebarOverlay.classList.remove('active');
document.body.style.overflow = '';
// Reset to default arrow right icon for desktop
arrowRightIcon.style.display = 'block';
arrowLeftIcon.style.display = 'none';
} else { // Mobile: ensure sidebar is hidden by default
if (! sidebar.classList.contains('mobile-open')) {
sidebar.classList.remove('mobile-open');
sidebarOverlay.classList.remove('active');
document.body.style.overflow = '';
arrowRightIcon.style.display = 'block';
arrowLeftIcon.style.display = 'none';
}
}
}

function toggleSidebar() {
if (isMobile) { // Mobile behavior
const isOpen = sidebar.classList.contains('mobile-open');

if (isOpen) {
closeMobileSidebar();
} else {
openMobileSidebar();
}
}
// Desktop behavior removed since sidebar now works on hover
}

function openMobileSidebar() {
sidebar.classList.add('mobile-open');
sidebarOverlay.classList.add('active');
document.body.style.overflow = 'hidden';
// Switch to left arrow when sidebar is open
arrowRightIcon.style.display = 'none';
arrowLeftIcon.style.display = 'block';
}

function closeMobileSidebar() {
sidebar.classList.remove('mobile-open');
sidebarOverlay.classList.remove('active');
document.body.style.overflow = '';
// Switch back to right arrow when sidebar is closed
arrowRightIcon.style.display = 'block';
arrowLeftIcon.style.display = 'none';
}

// Event Listeners
sidebarToggle.addEventListener('click', toggleSidebar);
sidebarOverlay.addEventListener('click', closeMobileSidebar);

// Close sidebar when clicking outside on mobile
document.addEventListener('click', function (e) {
if (isMobile && sidebar.classList.contains('mobile-open') && ! sidebar.contains(e.target) && ! sidebarToggle.contains(e.target)) {
closeMobileSidebar();
}
});

// Handle window resize
window.addEventListener('resize', updateMobileState);

// Initialize on page load
updateMobileState();

// Keyboard accessibility
sidebarToggle.addEventListener('keydown', function (e) {
if (e.key === ' ' || e.key === 'Enter') {
e.preventDefault();
toggleSidebar();
}
});

// Close sidebar with Escape key
document.addEventListener('keydown', function (e) {
if (e.key === 'Escape' && isMobile && sidebar.classList.contains('mobile-open')) {
closeMobileSidebar();
}
});

// Fonction pour copier un code
function copyCode(element) {
const codeValue = element.querySelector('.code-value').textContent;
// Créer un élément temporaire pour la copie
const tempInput = document.createElement('input');
tempInput.value = codeValue;
document.body.appendChild(tempInput);
tempInput.select();
document.execCommand('copy');
document.body.removeChild(tempInput);

// Animation de confirmation
const originalBg = element.style.background;
element.style.background = 'linear-gradient(45deg, var(--primary-green), #2ecc71)';
element.style.color = 'var(--primary-white)';
element.innerHTML = element.innerHTML.replace('Code P:', 'Copié!').replace('Code T:', 'Copié!');

setTimeout(() => {
element.style.background = originalBg;
location.reload(); // Recharger pour restaurer le texte original
}, 1500);
}

// Animation au chargement de la page
document.addEventListener('DOMContentLoaded', () => {
const elements = document.querySelectorAll('.info-item, .competition-item');
elements.forEach((element, index) => {
element.style.opacity = '0';
element.style.transform = 'translateY(30px)';

setTimeout(() => {
element.style.transition = 'all 0.6s ease';
element.style.opacity = '1';
element.style.transform = 'translateY(0)';
}, index * 100);
});
});
</script>{% endblock %}
